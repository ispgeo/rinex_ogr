
#include "test/all.hpp"
#include "test/load.hpp"

int main(int argc, char ** argv)
{
    InitGoogleTest(& argc, argv);

	fname = create_RINEX_2_10();
    
	return RUN_ALL_TESTS();
}

string create_RINEX_2_10()
{
	const string base_fname = tmpnam(nullptr);
	const string obs_fname = base_fname + ".18o";
	const string nav_fname = base_fname + ".18N";
    ofstream obs_fl(obs_fname), nav_fl(nav_fname);

	obs_fl << "     2.10           OBSERVATION DATA    M (MIXED)           RINEX VERSION / TYPE" << endl;
	obs_fl << "JPS2RIN v.2.0.134   JAVAD GNSS          20171019 091707 UTC PGM / RUN BY / DATE" << endl;
	obs_fl << "-Unknown-           -Unknown-                               OBSERVER / AGENCY" << endl;
	obs_fl << "log0724a                                                    MARKER NAME" << endl;
	obs_fl << "014VOACFYDQ1P0WH4C98JAVAD TRIUMPH1      3.5.13 May,18,2016  REC # / TYPE / VERS" << endl;
	obs_fl << "   788695.4140  2859795.3351  5627377.8254                  APPROX POSITION XYZ" << endl;
	obs_fl << "-Unknown-                                                   ANT # / TYPE" << endl;
	obs_fl << "        0.0000        0.0000        0.0000                  ANTENNA: DELTA H/E/N" << endl;
	obs_fl << "     1     1                                                WAVELENGTH FACT L1/2" << endl;
	obs_fl << "     9    C1    P1    L1    D1    S1    P2    L2    D2    S2# / TYPES OF OBSERV" << endl;
	obs_fl << "     1.000                                                  INTERVAL" << endl;
	obs_fl << "  2017     7    24     9    25   25.0000000     GPS         TIME OF FIRST OBS" << endl;
	obs_fl << "  2017     7    24    10    33   52.0000000     GPS         TIME OF LAST OBS" << endl;
	obs_fl << "    18                                                      LEAP SECONDS" << endl;
	obs_fl << "    26                                                      # OF SATELLITES" << endl;
	obs_fl << "   G 2  4108  4108  4108  4108  4108  4108  4108  4108  4108PRN / # OF OBS" << endl;
	obs_fl << "   G 5  4108  4108  4108  4108  4108  4108  4108  4108  4108PRN / # OF OBS" << endl;
	obs_fl << "   G 6  3851  3851  3851  3851  3851  3851  3851  3851  3851PRN / # OF OBS" << endl;
	obs_fl << "   G 9  4108  4108  4108  4108  4108  4108  4108  4108  4108PRN / # OF OBS" << endl;
	obs_fl << "   G12  3278  3255  3255  3255  3255  3255  3255  3255  3255PRN / # OF OBS" << endl;
	obs_fl << "   G20  3114  3113  3113  3113  3113  3113  3113  3113  3113PRN / # OF OBS" << endl;
	obs_fl << "   G21    22     0     0     0     0     0     0     0     0PRN / # OF OBS" << endl;
	obs_fl << "   G23  3658  3367  3367  3367  3366  3367  3367  3367  3366PRN / # OF OBS" << endl;
	obs_fl << "   G25  4108  4108  4108  4108  4108  4108  4108  4108  4108PRN / # OF OBS" << endl;
	obs_fl << "   G26  3089  2836  2836  2836  2834  2835  2836  2836  2834PRN / # OF OBS" << endl;
	obs_fl << "   G29  4108  4108  4108  4108  4108  4108  4108  4108  4108PRN / # OF OBS" << endl;
	obs_fl << "   G31  3969  3569  3569  3569  3565  3568  3569  3569  3564PRN / # OF OBS" << endl;
	obs_fl << "   R 2  4108  4108  4108  4108  4108  4108  4108  4108  4108PRN / # OF OBS" << endl;
	obs_fl << "   R 3  4108  4108  4108  4108  4108  4108  4108  4108  4108PRN / # OF OBS" << endl;
	obs_fl << "   R 4  3702  3695  3695  3695  3695  3629  3629  3629  3628PRN / # OF OBS" << endl;
	obs_fl << "   R 9  3188  3136  3136  3136  3136  2967  2970  2970  2967PRN / # OF OBS" << endl;
	obs_fl << "   R10  4108  4108  4108  4108  4108  4108  4108  4108  4108PRN / # OF OBS" << endl;
	obs_fl << "   R11  3573  3573  3573  3573  3573  3535  3535  3535  3535PRN / # OF OBS" << endl;
	obs_fl << "   R17   821   818   818   818   818   819   819   819   819PRN / # OF OBS" << endl;
	obs_fl << "   R18  4108  4108  4108  4108  4108  4108  4108  4108  4108PRN / # OF OBS" << endl;
	obs_fl << "   R19  4108  4108  4108  4108  4108  4108  4108  4108  4108PRN / # OF OBS" << endl;
	obs_fl << "   R20  2792  2758  2758  2758  2758  2746  2746  2746  2746PRN / # OF OBS" << endl;
	obs_fl << "   R26  3266  3253  3254  3254  3253  2973  2973  2973  2973PRN / # OF OBS" << endl;
	obs_fl << "   S27  3252     0  3252  3252  3252     0     0     0     0PRN / # OF OBS" << endl;
	obs_fl << "   S28  1044     0  1044  1044  1044     0     0     0     0PRN / # OF OBS" << endl;
	obs_fl << "   S40  4108     0  4108  4108  4108     0     0     0     0PRN / # OF OBS" << endl;
	obs_fl << "                                                            END OF HEADER" << endl;
	obs_fl << " 17  7 24  9 25 25.0000000  0 17G 2G 9R17G 5G 6R19R10R 3S40G31R 2G23-0.000379012" << endl;
	obs_fl << "                                G25R 9G12R18G29" << endl;
	obs_fl << "  20591621.316    20591620.426   108209700.028 7      -146.133          43.000" << endl;
	obs_fl << "  20591616.906    84319248.888 7      -113.837          43.000" << endl;
	obs_fl << "  23525583.116    23525582.816   123627778.737 4      1429.765          25.750" << endl;
	obs_fl << "  23525585.886    96333337.081 4      1114.085          25.750" << endl;
	obs_fl << "  23373093.100    23373093.460   125074116.330 6     -3873.635          36.000" << endl;
	obs_fl << "  23373103.200    97279894.752 5     -3012.821          34.250" << endl;
	obs_fl << "  22600780.232    22600779.782   118767901.650 4      3517.824          27.750" << endl;
	obs_fl << "  22600777.962    92546420.560 4      2741.197          27.750" << endl;
	obs_fl << "  22482964.039    22482963.819   118148775.695 5     -2950.269          30.500" << endl;
	obs_fl << "  22482964.959    92063981.141 5     -2298.892          30.500" << endl;
	obs_fl << "  19720432.426    19720432.176   105491013.229 8      2257.738          48.250" << endl;
	obs_fl << "  19720435.506    82048563.705 7      1755.979          46.000" << endl;
	obs_fl << "  21230844.236    21230844.076   113172346.059 7      1748.811          44.750" << endl;
	obs_fl << "  21230851.606    88022938.857 6      1360.108          37.000" << endl;
	obs_fl << "  21007820.652    21007819.712   112456502.696 7      3119.597          46.750" << endl;
	obs_fl << "  21007824.932    87466173.259 7      2426.327          41.750" << endl;
	obs_fl << "  39974576.991                   210066520.908 6       389.190          35.750" << endl;
	obs_fl << "" << endl;
	obs_fl << "  23536369.579    23536369.539   123684457.719 5      -793.122          30.250" << endl;
	obs_fl << "  23536367.119    96377510.174 5      -617.975          30.250" << endl;
	obs_fl << "  20783042.233    20783042.923   110902285.797 8     -1028.284          50.250" << endl;
	obs_fl << "  20783047.203    86257338.201 7      -799.751          43.250" << endl;
	obs_fl << "  24178388.664    24178389.954   127058290.970 4      -110.984          24.750" << endl;
	obs_fl << "  24178385.004    99006468.300 4       -86.423          24.750" << endl;
	obs_fl << "  21279336.449    21279335.079   111823672.952 7     -1226.653          42.750" << endl;
	obs_fl << "  21279337.689    87135328.295 7      -955.819          42.750" << endl;
	obs_fl << "  21216201.464    21216201.754   113293323.364 8     -2659.749          47.750" << endl;
	obs_fl << "  21216205.344    88117030.425 7     -2068.676          45.250" << endl;
	obs_fl << "  22379988.591    22379988.341   117607633.508 4     -3253.516          26.500" << endl;
	obs_fl << "  22379987.131    91642311.641 4     -2535.322          26.500" << endl;
	obs_fl << "  19615072.018    19615072.078   104706576.687 8     -1824.972          52.750" << endl;
	obs_fl << "  19615077.518    81438450.134 7     -1419.421          46.250" << endl;
	obs_fl << "  21614809.468    21614809.288   113586588.421 6      2879.982          40.000" << endl;
	obs_fl << "  21614808.248    88509029.867 6      2244.087          40.000" << endl;

	nav_fl << "     2.10           N: GPS NAV DATA                         RINEX VERSION / TYPE" << endl;
	nav_fl << "JPS2RIN v.2.0.134   JAVAD GNSS          20171019 091709 UTC PGM / RUN BY / DATE" << endl;
	nav_fl << "    18                                                      LEAP SECONDS" << endl;
	nav_fl << "    4.6566D-09  1.4901D-08 -5.9605D-08 -5.9605D-08          ION ALPHA" << endl;
	nav_fl << "    7.9872D+04  6.5536D+04 -6.5536D+04 -3.9322D+05          ION BETA" << endl;
	nav_fl << "                                                            END OF HEADER" << endl;
	nav_fl << " 5 17  7 24  9 25 25.0-3.601983189583D-05 1.477928890381D-12 0.000000000000D+00" << endl;
	nav_fl << "    2.100000000000D+01 2.281250000000D+00 4.550546691392D-09 5.890483094836D-02" << endl;
	nav_fl << "    2.309679985046D-07 5.108046578243D-03 1.187995076180D-05 5.153796501160D+03" << endl;
	nav_fl << "    1.223840000000D+05 5.774199962616D-08-2.493213528968D+00 1.192092895508D-07" << endl;
	nav_fl << "    9.471099105408D-01 1.424062500000D+02 5.565331894298D-01-8.043906489564D-09" << endl;
	nav_fl << "    7.118153642528D-10 1.000000000000D+00 1.959000000000D+03 0.000000000000D+00" << endl;
	nav_fl << "    2.000000000000D+00 0.000000000000D+00-1.071020960808D-08 2.100000000000D+01" << endl;
	nav_fl << "    1.203000000000D+05 4.000000000000D+00" << endl;
	nav_fl << "23 17  7 24  9 25 25.0-2.154428511858D-04-4.547473508865D-13 0.000000000000D+00" << endl;
	nav_fl << "    5.000000000000D+00 9.562500000000D+00 5.452727127972D-09-2.076667378698D+00" << endl;
	nav_fl << "    1.452863216400D-07 1.188119302969D-02 4.045665264130D-06 5.153702472687D+03" << endl;
	nav_fl << "    1.223840000000D+05 1.955777406693D-07-1.438230537926D+00-5.215406417847D-08" << endl;
	nav_fl << "    9.437127792309D-01 2.889687500000D+02-2.435679964281D+00-8.461781038574D-09" << endl;
	nav_fl << "    3.596578383355D-10 1.000000000000D+00 1.959000000000D+03 0.000000000000D+00" << endl;
	nav_fl << "    2.000000000000D+00 0.000000000000D+00-2.048909664154D-08 5.000000000000D+00" << endl;
	nav_fl << "    1.203300000000D+05 4.000000000000D+00" << endl;
	nav_fl << "29 17  7 24  9 25 25.0 5.822139792144D-04-3.979039320257D-12 0.000000000000D+00" << endl;
	nav_fl << "    0.000000000000D+00 9.875000000000D+00 4.472686305338D-09 7.255692144130D-01" << endl;
	nav_fl << "    5.029141902924D-07 6.297739455476D-04 2.384185791016D-07 5.153591268539D+03" << endl;
	nav_fl << "    1.223840000000D+05-6.891787052155D-08 1.770668302276D+00 2.607703208923D-08" << endl;
	nav_fl << "    9.813274034939D-01 3.852187500000D+02 6.981822878547D-01-8.427493896091D-09" << endl;
	nav_fl << "   -7.643175511796D-11 1.000000000000D+00 1.959000000000D+03 0.000000000000D+00" << endl;
	nav_fl << "    2.000000000000D+00 0.000000000000D+00-9.778887033463D-09 0.000000000000D+00" << endl;
	nav_fl << "    1.203000000000D+05 4.000000000000D+00" << endl;
	nav_fl << "31 17  7 24  9 25 25.0 1.864195801318D-04-2.387423592154D-12 0.000000000000D+00" << endl;
	nav_fl << "    9.000000000000D+00-2.503125000000D+01 4.485186826034D-09 2.568801269958D+00" << endl;
	nav_fl << "   -1.095235347748D-06 8.424755651504D-03 1.097843050957D-05 5.153744367599D+03" << endl;
	nav_fl << "    1.223840000000D+05-1.154839992523D-07-3.497445241033D-01 1.396983861923D-07" << endl;
	nav_fl << "    9.666579178452D-01 1.715312500000D+02-2.498400154338D-01-7.807110911792D-09" << endl;
	nav_fl << "   -6.575273886550D-10 1.000000000000D+00 1.959000000000D+03 0.000000000000D+00" << endl;
	nav_fl << "    2.000000000000D+00 0.000000000000D+00-1.350417733192D-08 9.000000000000D+00" << endl;
	nav_fl << "    1.203000000000D+05 4.000000000000D+00" << endl;

	return obs_fname;
}

